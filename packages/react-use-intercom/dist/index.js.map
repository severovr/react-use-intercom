{"version":3,"sources":["../src/provider.tsx","../src/logger.ts","../src/utils.ts","../src/api.ts","../src/context.ts","../src/initialize.ts","../src/mappers.ts","../src/useIntercom.ts"],"names":["log","level","message","packageName","isSSR","removeUndefined","obj","key","IntercomAPI","method","args","api_default","IntercomContext","H","context_default","initialize","appId","timeout","cspNonce","scriptUrl","w","ic","d","i","l","s","x","initialize_default","mapMessengerAttributesToRawMessengerAttributes","attributes","mapDataAttributesCompanyToRawDataAttributesCompany","__spreadValues","mapDataAttributesAvatarToRawDataAttributesAvatar","mapDataAttributesToRawDataAttributes","_a","mapIntercomPropsToRawIntercomProps","props","IntercomProvider","_b","autoBoot","autoBootProps","children","onHide","onShow","onUnreadCountChange","onUserEmailSupplied","shouldInitialize","apiBase","initializeDelay","rest","__objRest","isBooted","isInitialized","isOpen","setIsOpen","invalidPropKeys","boot","metaData","ensureIntercom","functionName","callback","shutdown","hardShutdown","refresh","last_request_at","update","rawProps","hide","show","showMessages","showNewMessage","getVisitorId","startTour","tourId","startChecklist","checklistId","trackEvent","event","showArticle","articleId","showSpace","spaceName","startSurvey","surveyId","showNews","newsId","showTicket","ticketId","showConversation","conversationId","providerValue","useIntercomContext","context","useIntercom"],"mappings":"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","file":"index.js","sourcesContent":["import * as React from 'react';\n\nimport IntercomAPI from './api';\nimport IntercomContext from './context';\nimport initialize from './initialize';\nimport * as logger from './logger';\nimport { mapIntercomPropsToRawIntercomProps } from './mappers';\nimport {\n  IntercomContextValues,\n  IntercomProps,\n  IntercomProviderProps,\n  IntercomSpace,\n  RawIntercomBootProps,\n} from './types';\nimport { isSSR } from './utils';\n\nexport const IntercomProvider: React.FC<\n  React.PropsWithChildren<IntercomProviderProps>\n> = ({\n  appId,\n  autoBoot = false,\n  autoBootProps,\n  children,\n  onHide,\n  onShow,\n  onUnreadCountChange,\n  onUserEmailSupplied,\n  shouldInitialize = !isSSR,\n  apiBase,\n  initializeDelay,\n  cspNonce,\n  scriptUrl,\n  ...rest\n}) => {\n  const isBooted = React.useRef(false);\n  const isInitialized = React.useRef(false);\n  const [isOpen, setIsOpen] = React.useState(false);\n\n  // Allow data-x attributes, see https://github.com/devrnt/react-use-intercom/issues/478\n  const invalidPropKeys = Object.keys(rest).filter(\n    (key) => !key.startsWith('data-'),\n  );\n\n  if (invalidPropKeys.length > 0) {\n    logger.log(\n      'warn',\n      [\n        'some invalid props were passed to IntercomProvider. ',\n        `Please check following props: ${invalidPropKeys.join(', ')}.`,\n      ].join(''),\n    );\n  }\n\n  const boot = React.useCallback(\n    (props?: IntercomProps) => {\n      if (!window.Intercom && !shouldInitialize) {\n        logger.log(\n          'warn',\n          'Intercom instance is not initialized because `shouldInitialize` is set to `false` in `IntercomProvider`',\n        );\n        return;\n      }\n\n      if (isBooted.current) {\n        return;\n      }\n\n      // Register the listeners\n      // This is done in the booth method because after shutting down\n      // the callbacks should be re-registered on a reboot\n      IntercomAPI('onHide', () => {\n        setIsOpen(false);\n        onHide?.();\n      });\n      IntercomAPI('onShow', () => {\n        setIsOpen(true);\n        onShow?.();\n      });\n      IntercomAPI('onUserEmailSupplied', onUserEmailSupplied);\n\n      if (onUnreadCountChange) {\n        IntercomAPI('onUnreadCountChange', onUnreadCountChange);\n      }\n\n      const metaData: RawIntercomBootProps = {\n        app_id: appId,\n        ...(apiBase && { api_base: apiBase }),\n        ...(props && mapIntercomPropsToRawIntercomProps(props)),\n      };\n\n      window.intercomSettings = metaData;\n      IntercomAPI('boot', metaData);\n      isBooted.current = true;\n    },\n    [\n      apiBase,\n      appId,\n      onHide,\n      onShow,\n      onUnreadCountChange,\n      onUserEmailSupplied,\n      shouldInitialize,\n    ],\n  );\n\n  if (!isSSR && shouldInitialize && !isInitialized.current) {\n    initialize(appId, initializeDelay, cspNonce, scriptUrl);\n\n    if (autoBoot) {\n      boot(autoBootProps);\n    }\n\n    isInitialized.current = true;\n  }\n\n  const ensureIntercom = React.useCallback(\n    (functionName: string, callback: (() => void) | (() => string)) => {\n      if (!window.Intercom && !shouldInitialize) {\n        logger.log(\n          'warn',\n          'Intercom instance is not initialized because `shouldInitialize` is set to `false` in `IntercomProvider`',\n        );\n        return;\n      }\n      if (!isBooted.current) {\n        logger.log(\n          'warn',\n          [\n            `\"${functionName}\" was called but Intercom has not booted yet. `,\n            `Please call 'boot' before calling '${functionName}' or `,\n            `set 'autoBoot' to true in the IntercomProvider.`,\n          ].join(''),\n        );\n        return;\n      }\n      return callback();\n    },\n    [shouldInitialize],\n  );\n\n  const shutdown = React.useCallback(() => {\n    if (!isBooted.current) return;\n\n    IntercomAPI('shutdown');\n    delete window.intercomSettings;\n    isBooted.current = false;\n  }, []);\n\n  const hardShutdown = React.useCallback(() => {\n    if (!isBooted.current) return;\n\n    IntercomAPI('shutdown');\n    delete window.Intercom;\n    delete window.intercomSettings;\n    isBooted.current = false;\n  }, []);\n\n  const refresh = React.useCallback(() => {\n    ensureIntercom('update', () => {\n      const last_request_at = Math.floor(new Date().getTime() / 1000);\n      IntercomAPI('update', { last_request_at });\n    });\n  }, [ensureIntercom]);\n\n  const update = React.useCallback(\n    (props?: IntercomProps) => {\n      ensureIntercom('update', () => {\n        if (!props) {\n          refresh();\n          return;\n        }\n        const rawProps = mapIntercomPropsToRawIntercomProps(props);\n        window.intercomSettings = { ...window.intercomSettings, ...rawProps };\n        IntercomAPI('update', rawProps);\n      });\n    },\n    [ensureIntercom, refresh],\n  );\n\n  const hide = React.useCallback(() => {\n    ensureIntercom('hide', () => {\n      IntercomAPI('hide');\n    });\n  }, [ensureIntercom]);\n\n  const show = React.useCallback(() => {\n    ensureIntercom('show', () => IntercomAPI('show'));\n  }, [ensureIntercom]);\n\n  const showMessages = React.useCallback(() => {\n    ensureIntercom('showMessages', () => {\n      IntercomAPI('showMessages');\n    });\n  }, [ensureIntercom]);\n\n  const showNewMessage = React.useCallback(\n    (message?: string) => {\n      ensureIntercom('showNewMessage', () => {\n        if (!message) {\n          IntercomAPI('showNewMessage');\n        } else {\n          IntercomAPI('showNewMessage', message);\n        }\n      });\n    },\n    [ensureIntercom],\n  );\n\n  const getVisitorId = React.useCallback(() => {\n    return ensureIntercom('getVisitorId', () => {\n      return IntercomAPI('getVisitorId');\n    }) as string;\n  }, [ensureIntercom]);\n\n  const startTour = React.useCallback(\n    (tourId: number) => {\n      ensureIntercom('startTour', () => {\n        IntercomAPI('startTour', tourId);\n      });\n    },\n    [ensureIntercom],\n  );\n\n  const startChecklist = React.useCallback(\n    (checklistId: number) => {\n      ensureIntercom('startChecklist', () => {\n        IntercomAPI('startChecklist', checklistId);\n      });\n    },\n    [ensureIntercom],\n  );\n\n  const trackEvent = React.useCallback(\n    (event: string, metaData?: object) => {\n      ensureIntercom('trackEvent', () => {\n        if (metaData) {\n          IntercomAPI('trackEvent', event, metaData);\n        } else {\n          IntercomAPI('trackEvent', event);\n        }\n      });\n    },\n    [ensureIntercom],\n  );\n\n  const showArticle = React.useCallback(\n    (articleId: number) =>\n      ensureIntercom('showArticle', () => {\n        IntercomAPI('showArticle', articleId);\n      }),\n    [ensureIntercom],\n  );\n\n  const showSpace = React.useCallback(\n    (spaceName: IntercomSpace) =>\n      ensureIntercom('showSpace', () => {\n        IntercomAPI('showSpace', spaceName);\n      }),\n    [ensureIntercom],\n  );\n\n  const startSurvey = React.useCallback(\n    (surveyId: number) => {\n      ensureIntercom('startSurvey', () => {\n        IntercomAPI('startSurvey', surveyId);\n      });\n    },\n    [ensureIntercom],\n  );\n\n  const showNews = React.useCallback(\n    (newsId: number) =>\n      ensureIntercom('showNews', () => {\n        IntercomAPI('showNews', newsId);\n      }),\n    [ensureIntercom],\n  );\n\n  const showTicket = React.useCallback(\n    (ticketId: number) =>\n      ensureIntercom('showTicket', () => {\n        IntercomAPI('showTicket', ticketId);\n      }),\n    [ensureIntercom],\n  );\n\n  const showConversation = React.useCallback(\n    (conversationId: number) =>\n      ensureIntercom('showConversation', () => {\n        IntercomAPI('showConversation', conversationId);\n      }),\n    [ensureIntercom],\n  );\n\n  const providerValue = React.useMemo<IntercomContextValues>(() => {\n    return {\n      boot,\n      shutdown,\n      hardShutdown,\n      update,\n      hide,\n      show,\n      isOpen,\n      showMessages,\n      showNewMessage,\n      getVisitorId,\n      startTour,\n      startChecklist,\n      trackEvent,\n      showArticle,\n      startSurvey,\n      showSpace,\n      showNews,\n      showTicket,\n      showConversation,\n    };\n  }, [\n    boot,\n    shutdown,\n    hardShutdown,\n    update,\n    hide,\n    show,\n    isOpen,\n    showMessages,\n    showNewMessage,\n    getVisitorId,\n    startTour,\n    startChecklist,\n    trackEvent,\n    showArticle,\n    startSurvey,\n    showSpace,\n    showNews,\n    showTicket,\n    showConversation,\n  ]);\n\n  return (\n    <IntercomContext.Provider value={providerValue}>\n      {children}\n    </IntercomContext.Provider>\n  );\n};\n\nexport const useIntercomContext = () => {\n  const context = React.useContext(IntercomContext);\n\n  if (context === undefined) {\n    throw new Error('\"useIntercom\" must be used within `IntercomProvider`.');\n  }\n\n  return context as IntercomContextValues;\n};\n","import { LogLevel } from './types';\n\n/**\n * Logs messages in the console with a corresponding urgency\n *\n * @param level the urgency of the message\n * @param message the message to log in the console\n */\nexport const log = (level: LogLevel, message: string) => {\n  const packageName = '[react-use-intercom]';\n\n  switch (level) {\n    case 'info':\n      console.log(`${packageName} ${message}`);\n      break;\n    case 'warn':\n      console.warn(`${packageName} ${message}`);\n      break;\n    case 'error':\n      console.error(`${packageName} ${message}`);\n      break;\n    default:\n      console.log(`${packageName} ${message}`);\n  }\n};\n","export const isSSR = typeof window === 'undefined';\n\n/**\n * Removes object entries where the value equals to `undefined`\n *\n * @param obj\n */\nexport const removeUndefined = (obj: any) => {\n  Object.keys(obj).forEach((key) => {\n    if (obj[key] && typeof obj[key] === 'object') removeUndefined(obj[key]);\n    else if (obj[key] === undefined) delete obj[key];\n  });\n  return obj;\n};\n","import * as logger from './logger';\nimport { IntercomMethod } from './types';\nimport { isSSR } from './utils';\n\n/**\n * Safely exposes `window.Intercom` and passes the arguments to the instance\n *\n * @param method method passed to the `window.Intercom` instance\n * @param args arguments passed to the `window.Intercom` instance\n *\n * @see {@link https://developers.intercom.com/installing-intercom/docs/intercom-javascript}\n */\nconst IntercomAPI = (method: IntercomMethod, ...args: Array<any>) => {\n  if (!isSSR && window.Intercom) {\n    return window.Intercom.apply(null, [method, ...args]);\n  } else {\n    logger.log('error', `${method} Intercom instance is not initalized yet`);\n  }\n};\n\nexport default IntercomAPI;\n","import * as React from 'react';\n\nimport { IntercomContextValues } from './types';\n\nconst IntercomContext = React.createContext<IntercomContextValues | undefined>(\n  undefined,\n);\n\nexport default IntercomContext;\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n/* eslint-disable prefer-rest-params */\n/* eslint-disable no-var */\n// @ts-nocheck\n/**\n * Snippet to initialize the Intercom instance\n *\n * @param appId - Intercom app id\n * @param [timeout=0] - Amount of milliseconds that the initialization should be delayed, defaults to 0\n * @param [cspNonce=undefined] - Content-Security-Policy nonce to use for the Intercom <script> tag during initializing\n *\n * @see {@link https://developers.intercom.com/installing-intercom/docs/basic-javascript}\n */\nconst initialize = (appId: string, timeout: number = 0, cspNonce?: string, scriptUrl?: string) => {\n  var w = window;\n  var ic = w.Intercom;\n  if (typeof ic === 'function') {\n    ic('reattach_activator');\n    ic('update', w.intercomSettings);\n  } else {\n    var d = document;\n    var i = function () {\n      i.c(arguments);\n    };\n    i.q = [];\n    i.c = function (args) {\n      i.q.push(args);\n    };\n    w.Intercom = i;\n    var l = function () {\n      setTimeout(function () {\n        var s = d.createElement('script');\n        s.type = 'text/javascript';\n        s.async = true;\n        if (cspNonce) s.setAttribute('nonce', cspNonce);\n        s.src = (scriptUrl || 'https://widget.intercom.io/widget/') + '?appid=' + appId;\n        var x = d.getElementsByTagName('script')[0];\n        x.parentNode.insertBefore(s, x);\n      }, timeout);\n    };\n    if (document.readyState === 'complete') {\n      l();\n    } else if (w.attachEvent) {\n      w.attachEvent('onload', l);\n    } else {\n      w.addEventListener('load', l, false);\n    }\n  }\n};\n\nexport default initialize;\n","import {\n  DataAttributes,\n  DataAttributesAvatar,\n  DataAttributesCompany,\n  IntercomProps,\n  MessengerAttributes,\n  RawDataAttributes,\n  RawDataAttributesAvatar,\n  RawDataAttributesCompany,\n  RawIntercomProps,\n  RawMessengerAttributes,\n} from './types';\nimport { removeUndefined } from './utils';\n\nexport const mapMessengerAttributesToRawMessengerAttributes = (\n  attributes: MessengerAttributes,\n): RawMessengerAttributes => ({\n  custom_launcher_selector: attributes.customLauncherSelector,\n  alignment: attributes.alignment,\n  vertical_padding: attributes.verticalPadding,\n  horizontal_padding: attributes.horizontalPadding,\n  z_index: attributes.zIndex,\n  hide_default_launcher: attributes.hideDefaultLauncher,\n  session_duration: attributes.sessionDuration,\n  action_color: attributes.actionColor,\n  background_color: attributes.backgroundColor,\n});\n\nconst mapDataAttributesCompanyToRawDataAttributesCompany = (\n  attributes: DataAttributesCompany,\n): RawDataAttributesCompany => ({\n  company_id: attributes.companyId,\n  name: attributes.name,\n  created_at: attributes.createdAt,\n  plan: attributes.plan,\n  monthly_spend: attributes.monthlySpend,\n  user_count: attributes.userCount,\n  size: attributes.size,\n  website: attributes.website,\n  industry: attributes.industry,\n  ...attributes.customAttributes,\n});\n\nconst mapDataAttributesAvatarToRawDataAttributesAvatar = (\n  attributes: DataAttributesAvatar,\n): RawDataAttributesAvatar => ({\n  type: attributes.type,\n  image_url: attributes.imageUrl,\n});\n\nexport const mapDataAttributesToRawDataAttributes = (\n  attributes: DataAttributes,\n): RawDataAttributes => ({\n  email: attributes.email,\n  user_id: attributes.userId,\n  created_at: attributes.createdAt,\n  name: attributes.name,\n  phone: attributes.phone,\n  last_request_at: attributes.lastRequestAt,\n  unsubscribed_from_emails: attributes.unsubscribedFromEmails,\n  language_override: attributes.languageOverride,\n  utm_campaign: attributes.utmCampaign,\n  utm_content: attributes.utmContent,\n  utm_medium: attributes.utmMedium,\n  utm_source: attributes.utmSource,\n  utm_term: attributes.utmTerm,\n  avatar:\n    attributes.avatar &&\n    mapDataAttributesAvatarToRawDataAttributesAvatar(attributes.avatar),\n  user_hash: attributes.userHash,\n  company:\n    attributes.company &&\n    mapDataAttributesCompanyToRawDataAttributesCompany(attributes.company),\n  companies: attributes.companies?.map(\n    mapDataAttributesCompanyToRawDataAttributesCompany,\n  ),\n  intercom_user_jwt: attributes.intercomUserJwt,\n  ...attributes.customAttributes,\n});\n\nexport const mapIntercomPropsToRawIntercomProps = (\n  props: IntercomProps,\n): RawIntercomProps => {\n  return removeUndefined({\n    ...mapMessengerAttributesToRawMessengerAttributes(props),\n    ...mapDataAttributesToRawDataAttributes(props),\n  });\n};\n","import { useIntercomContext } from './provider';\n\nexport const useIntercom = () => {\n  return useIntercomContext();\n};\n"]}